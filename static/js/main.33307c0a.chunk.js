(this.webpackJsonpcrystal=this.webpackJsonpcrystal||[]).push([[0],{18:function(e,t){e.exports={isAlphaNumeric:function(e){var t,n,a;for(n=0,a=e.length;n<a;n++)if(!((t=e.charCodeAt(n))>47&&t<58)&&!(t>64&&t<91)&&!(t>96&&t<123))return!1;return!0}}},19:function(e,t,n){e.exports=n(45)},24:function(e,t,n){},26:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),l=n.n(o),c=(n(24),n(1)),i=n.n(c),u=n(2),s=n(4),d=n(3),m=(n(26),n(7)),p=n(8).url,f=function(e){var t=e.path,n=e.getContent,a=e.title,o=e.parent,c=e.logout,s=e.name,f="delModalID"+t+a,g="delModal"+t+a,E="delModal-content"+t+a,v="delModal-close"+t+a;function h(){var e=document.getElementById(f);l.a.findDOMNode(e).style.display="none"}function b(){return(b=Object(u.a)(i.a.mark((function e(n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=localStorage.getItem("JWT"),!Object(d.b)(r)){e.next=6;break}c(),e.next=9;break;case 6:return o=a?p+t+a:p+t,e.next=9,m.delete(o,{headers:{authorization:"token ".concat(r)}}).then((function(e){y()})).catch((function(e){console.log(e);var t=document.getElementById("delError");t.innerHTML=e,setTimeout((function(){t.innerHTML=""}),3e3)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){h(),n(o||t)}return r.a.createElement("div",{className:"directoryButtons"},r.a.createElement("button",{className:"removeButton directoryButtons",onClick:function(e){return function(e){e.preventDefault();var t=document.getElementById(f);l.a.findDOMNode(t).style.display="block"}(e)}},"-"),r.a.createElement("div",{id:f,className:g,onClick:function(e){return function(e){e.preventDefault();var t=e.target.classList[0];t!==g&&t!==v||h()}(e)},style:{display:"none",position:"fixed",paddingTop:"100px",left:0,top:0,width:"100%",height:"100%",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)"}},r.a.createElement("div",{className:E,style:{backgroundColor:"rgb(150,150,150)",margin:"auto",padding:"20px",border:"10px solid #888",width:"80%"}},r.a.createElement("span",{className:v,style:{backgroundColor:"rgb(150,150,150)",color:"white",float:"right",fontSize:"28px",fontWeight:"bold"}},"\xd7"),r.a.createElement("form",{className:"modalElementForm"},r.a.createElement("p",{className:"modalElementForm"},"Remove ",s,a," and any potential children?"),r.a.createElement("button",{onClick:function(e){return function(e){return b.apply(this,arguments)}(e)}},"Yes"),r.a.createElement("div",{id:"delError"})))))},g=function(e){e.owner;var t,n=e.title,a=e.link,o=(e.author,e.directory,e.getContent),l=e.path,c=e.logout;return e.removeButton&&(t=r.a.createElement("div",{className:"bookmarkButton"},r.a.createElement(f,{title:n,path:l,getContent:o,logout:c}))),r.a.createElement("div",{className:"Bookmark"},r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},n),t)},E=n(7),v=n(8).url,h=n(18).isAlphaNumeric,b=function(e){var t,n=e.path,o=e.getContent,c=e.logout,m=e.bookmarks,p=e.directories,f=e.name,g="addModalID"+n,b="addModal"+n,y="addModal-content"+n,k="addModal-close"+n,w="addTitle"+n,C="addLink"+n,N="addName"+n,x=Object(a.useState)("bookmark"),O=Object(s.a)(x,2),j=O[0],M=O[1],I=localStorage.getItem("JWT"),B={display:"none",position:"fixed",paddingTop:"100px",left:0,top:0,width:"100%",height:"100%",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)"},T={backgroundColor:"rgb(150,150,150)",margin:"auto",padding:"20px",border:"10px solid #888",width:"80%"},S={backgroundColor:"rgb(150,150,150)",color:"white",float:"right",fontSize:"28px",fontWeight:"bold"},L={fontWeight:"bold",fontSize:"20px",color:"red"};function D(e){e.preventDefault();var t=e.target.classList[0];t!==b&&t!==k||U()}function U(){var e=document.getElementById(g);l.a.findDOMNode(e).style.display="none"}function F(e){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(i.a.mark((function e(t){var a,r,o,l,c,u,s,f,g,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),"bookmark"===j?(a=document.getElementById(w),r=document.getElementById(C),o=n,m.map((function(e){return e.title})).includes(a.value)?((l=document.getElementById("addError")).innerHTML="Cannot have duplicates",setTimeout((function(){l.innerHTML=""}),3e3)):(c=Object(d.a)(I),!(a.value.length>0&&a.value.length<20&&r.value.length>0&&r.value.length<100&&h(a.value))||a.value.includes("javascript:")||a.value.includes("<script")||a.value.includes("<img")||r.value.includes("javascript:")||r.value.includes("<script")||r.value.includes("<img")?((u=document.getElementById("addError")).innerHTML="Please only use alphanumeric character with no spaces for titles. Keep the title length below 20 characters and link length below 100.",setTimeout((function(){u.innerHTML=""}),3e3)):W({link:r.value,title:a.value,author:c.name,directory:o}))):"directory"===j&&(s=document.getElementById(N),f=n,p.map((function(e){return e.name})).includes(s.value)?((g=document.getElementById("addError")).innerHTML="Cannot have duplicate directories",setTimeout((function(){g.innerHTML=""}),3e3)):s.value.length>0&&s.value.length<20&&h(s.value)&&!s.value.includes("javascript:")&&!s.value.includes("<script")&&!s.value.includes("<imng")?W({name:s.value,parent:f}):((E=document.getElementById("addError")).innerHTML="Please only use alphanumeric character with no spaces for directories. Keep length below 20 characters",setTimeout((function(){E.innerHTML=""}),3e3)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(d.b)(I)){e.next=4;break}c(),e.next=6;break;case 4:return e.next=6,E.put(v+n,t,{headers:{authorization:"token ".concat(I)}}).then((function(e){U(),o(n)})).catch((function(e){console.log(e);var t=document.getElementById("addError");t.innerHTML=e,setTimeout((function(){t.innerHTML=""}),3e3)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=r.a.createElement("div",{className:"modalElementForm"},"Select what you would like to add",r.a.createElement("button",{onClick:function(e){return M("bookmark")}},"Bookmark"),r.a.createElement("button",{onClick:function(e){return M("directory")}},"Directory"));return"bookmark"===j?t=r.a.createElement("div",{id:g,className:b,onClick:function(e){return D(e)},style:B},r.a.createElement("div",{className:y,style:T},r.a.createElement("span",{className:k,style:S},"\xd7"),z,r.a.createElement("form",{className:"modalElementForm"},r.a.createElement("p",{className:"modalElementForm"},"Add bookmark to ",f),"Title:",r.a.createElement("input",{id:w}),"Link:",r.a.createElement("input",{id:C}),r.a.createElement("button",{onClick:function(e){return F(e)}},"Add bookmark to ",f),r.a.createElement("div",{style:L,id:"addError"})))):"directory"===j&&(t=r.a.createElement("div",{id:g,className:b,onClick:function(e){return D(e)},style:B},r.a.createElement("div",{className:y,style:T},r.a.createElement("span",{className:k,style:S},"\xd7"),z,r.a.createElement("form",{className:"modalElementForm"},r.a.createElement("p",{className:"modalElementForm"},"Add directory to ",f),"Name:",r.a.createElement("input",{id:N}),r.a.createElement("button",{onClick:function(e){return F(e)}},"Add directory to ",f),r.a.createElement("div",{style:L,id:"addError"}))))),r.a.createElement("div",{className:"directoryButtons"},r.a.createElement("button",{className:"addButton directoryButtons",onClick:function(e){return function(e){e.preventDefault();var t=document.getElementById(g);l.a.findDOMNode(t).style.display="block"}(e)}},"+"),t)},y=n(7),k=n(8).url,w=function e(t){var n=t.owner,o=t.name,l=t.parent,c=t.parentReRender,m=t.logout,p=[],E=[],v=l+o+"/",h=Object(a.useState)(l+o+"/"),w=Object(s.a)(h,2),C=w[0],N=w[1];v!==C&&(N(v),W(v));var x,O=Object(a.useState)(!1),j=Object(s.a)(O,2),M=j[0],I=j[1],B=Object(a.useState)([]),T=Object(s.a)(B,2),S=T[0],L=T[1],D=Object(a.useState)([]),U=Object(s.a)(D,2),F=U[0],H=U[1];function W(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E=[],p=[],e.next=4,y.get(k+t);case 4:for(a in(n=e.sent).data)n.data[a].parent?E.push(n.data[a]):n.data[a].directory&&p.push(n.data[a]);H(E),L(p);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){e.preventDefault(),W(C),I(!M)}Object(a.useEffect)((function(){"/"===C||C==="/"+o+"/"?(I(!0),W(C)):I(!1)}),[]);var J=!1,A=localStorage.getItem("JWT");if(A){var R=Object(d.a)(A),q=Object(d.b)(A),V="/"+n+"/";q||R.name!==n||V!==C?q||R.name!==n||(x=r.a.createElement("div",{className:"directoryButtons"},r.a.createElement(b,{path:C,getContent:W,logout:m,bookmarks:S,directories:F,name:o}),r.a.createElement(f,{path:C,getContent:c,parent:l,logout:m,name:o})),J=!0):(x=r.a.createElement("div",{className:"directoryButtons"},r.a.createElement(b,{path:C,getContent:W,logout:m,bookmarks:S,directories:F,name:o})),J=!0)}return M?r.a.createElement("div",{className:"Directory"},r.a.createElement("div",null,o,r.a.createElement("div",{className:"directoryButtons"},r.a.createElement("button",{className:"directoryButtons",onClick:function(e){return z(e)}},"Close")),r.a.createElement("div",{className:"directoryButtons"},x)),r.a.createElement("ul",{className:"list"},F.map((function(t){return r.a.createElement("li",{key:C+t.name},r.a.createElement(e,{owner:n,name:t.name,parent:t.parent,parentReRender:W,logout:m}))})),S.map((function(e){return r.a.createElement("li",{key:C+e.title},r.a.createElement(g,{owner:n,getContent:W,title:e.title,link:e.link,author:e.author,directory:e.directory,path:C,logout:m,removeButton:J}))})))):r.a.createElement("div",{className:"Directory"},o,r.a.createElement("div",{className:"directoryButtons"},r.a.createElement("button",{className:"directoryButtons",onClick:function(e){return z(e)}},"Open")))},C=n(7),N=n(8).url;function x(e){}var O=function(e){var t,n=e.name,a=e.parent,o=e.logout,l=e.followed,c=e.setFollowed,s=e.addFollowed,m=e.removeFollowed,p=l,f=localStorage.getItem("JWT");if(!Object(d.b)(f)){var g=Object(d.a)(f).name;n!==g&&(t=!0===p?r.a.createElement("button",{onClick:function(e){return function(e){return v.apply(this,arguments)}(n)}},"Unfollow"):r.a.createElement("button",{onClick:function(e){return function(e){return E.apply(this,arguments)}(n)}},"Follow"))}function E(){return(E=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(d.b)(f)){e.next=4;break}o(),e.next=7;break;case 4:return n={followName:t},e.next=7,C.post(N+"/api/follow",n,{headers:{authorization:"token ".concat(f)}}).then((function(e){p=!0,c(!0),s(t)})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(d.b)(f)){e.next=4;break}o(),e.next=7;break;case 4:return n={unfollowName:t},e.next=7,C.post(N+"/api/unfollow",n,{headers:{authorization:"token ".concat(f)}}).then((function(e){p=!1,c(!1),m(t)})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return""!==n&&void 0!==n?r.a.createElement("div",{className:"BMView"},"Viewing: ",n,t,r.a.createElement(w,{owner:n,name:n,parent:a,parentReRender:x,logout:o})):r.a.createElement("div",{className:"BMView"},"No Username selected, please select a user to view")},j=n(7),M=n(8).url,I=function(e){var t,n,o,l=e.loggedInUser,c=e.changeSelectedUser,d=e.followedUsers,m="",p=Object(a.useState)([]),f=Object(s.a)(p,2),g=f[0],E=f[1],v=Object(a.useState)("top"),h=Object(s.a)(v,2),b=h[0],y=h[1],k=Object(a.useState)(d),w=Object(s.a)(k,2);w[0],w[1];function C(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("top"!==t){e.next=5;break}return e.next=3,j.get(M+"/users/top").then((function(e){e.data.length>10?E(e.data.slice(0,10)):E(e.data)})).catch((function(e){console.log(e)}));case 3:e.next=19;break;case 5:if("following"!==t){e.next=9;break}E(d),e.next=19;break;case 9:if("search"!==t){e.next=18;break}if(!(m.length>0)){e.next=15;break}return e.next=13,j.get(M+"/users/search/"+m).then((function(e){e.data.length>10?E(e.data.slice(0,10)):E(e.data)})).catch((function(e){console.log(e)}));case 13:e.next=16;break;case 15:E([]);case 16:e.next=19;break;case 18:console.log("Unknown query!");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){e.preventDefault(),y(e.target.value),C(e.target.value)}return Object(a.useEffect)((function(){C(b)}),[]),"search"===b&&(t=r.a.createElement("div",null,"Search for user:",r.a.createElement("input",{onChange:function(e){return function(e){e.preventDefault(),m=e.target.value,C(b)}(e)}}))),n=null!==g&&g.length>0?r.a.createElement("div",null,r.a.createElement("ul",null,g.map((function(e){return r.a.createElement("li",{className:"userViewLi",id:e,key:e,onClick:function(e){return function(e){e.preventDefault(),c(e.target.id)}(e)}},e)})))):r.a.createElement("div",null,"No users found!"),o=l?r.a.createElement("select",{name:"query",id:"querySelect",onChange:function(e){return x(e)}},r.a.createElement("option",{value:"top"},"Top Users"),r.a.createElement("option",{value:"following"},"Following users"),r.a.createElement("option",{value:"search"},"Search for user")):r.a.createElement("select",{name:"query",id:"querySelect",onChange:function(e){return x(e)}},r.a.createElement("option",{value:"top"},"Top Users"),r.a.createElement("option",{value:"search"},"Search for user")),r.a.createElement("div",{className:"UserView"},"Users",r.a.createElement("br",null),o,t,n)},B=n(7),T=n(8).url,S=n(18).isAlphaNumeric,L=function(e){var t,n=e.logout,a=e.loginCreatePost,o=e.loggedInUser,c={display:"none",position:"fixed",paddingTop:"100px",left:0,top:0,zindex:9999999,width:"100%",height:"100%",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)"},s={backgroundColor:"rgb(200,200,200)",margin:"auto",padding:"20px",border:"10px solid #888",width:"80%"},d={backgroundColor:"rgb(200,200,200)",color:"#aaaaaa",float:"right",fontSize:"28px",fontWeight:"bold"},m={fontWeight:"bold",fontSize:"20px",color:"red"};function p(e){e.preventDefault();var t=e.target.classList[0];"loginModalClass"!==t&&"loginModalCloseClass"!==t||f(document.getElementById("loginModalId"));"createModalClass"!==t&&"createModalCloseClass"!==t||f(document.getElementById("createModalId"))}function f(e){l.a.findDOMNode(e).style.display="none"}function g(){return(g=Object(u.a)(i.a.mark((function e(){var t,n,r,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("loginUsername").value,n=document.getElementById("loginPassword").value,r={username:t,password:n},e.next=5,B.post(T+"/login",r);case 5:(o=e.sent).data.accessToken?(localStorage.setItem("JWT",o.data.accessToken),a(t),f(document.getElementById("loginModalId"))):((l=document.getElementById("loginError")).innerHTML="Error logging in. Check username/password",setTimeout((function(){l.innerHTML=""}),3e3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(u.a)(i.a.mark((function e(){var t,n,r,o,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("createUsername").value,n=document.getElementById("createPassword").value,!(t.length>0&&S(t))){e.next=10;break}return r={username:t,password:n},e.next=6,B.put(T+"/createUser",r);case 6:(o=e.sent).data.accessToken?(localStorage.setItem("JWT",o.data.accessToken),a(t),f(document.getElementById("createModalId"))):((l=document.getElementById("createError")).innerHTML="Error creating user. Username not avaliable",setTimeout((function(){l.innerHTML=""}),3e3)),e.next=13;break;case 10:(c=document.getElementById("createError")).innerHTML="No special characters or spaces allowed in username text",setTimeout((function(){c.innerHTML=""}),3e3);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t=e.loggedIn?r.a.createElement("div",null,"Hello ",o," ",r.a.createElement("button",{onClick:function(e){n()}},"Logout"),r.a.createElement("div",{id:"tokenError"})):r.a.createElement("div",null,"Please ",r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t=document.getElementById("loginModalId");l.a.findDOMNode(t).style.display="block"}(e)}},"login")," or ",r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t=document.getElementById("createModalId");l.a.findDOMNode(t).style.display="block"}(e)}},"create an account")," to add bookmarks!");var v=r.a.createElement("div",{id:"loginModalId",className:"loginModalClass",onClick:function(e){return p(e)},style:c},r.a.createElement("div",{className:"loginModalContent",style:s},r.a.createElement("span",{className:"loginModalCloseClass",style:d},"\xd7"),"Login Form",r.a.createElement("br",null),r.a.createElement("form",{className:"modalLoginForm"},"Username:",r.a.createElement("input",{id:"loginUsername",name:"usernamer"}),r.a.createElement("br",null),"Password:",r.a.createElement("input",{id:"loginPassword",name:"password",type:"password"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(e){return function(){return g.apply(this,arguments)}()}},"Login"),r.a.createElement("div",{style:m,id:"loginError"})))),h=r.a.createElement("div",{id:"createModalId",className:"createModalClass",onClick:function(e){return p(e)},style:c},r.a.createElement("div",{className:"createModalContent",style:s},r.a.createElement("span",{className:"createModalCloseClass",style:d},"\xd7"),"Create Form",r.a.createElement("br",null),r.a.createElement("form",{className:"modalLoginForm"},"Username:",r.a.createElement("input",{id:"createUsername",name:"username"}),r.a.createElement("br",null),"Password:",r.a.createElement("input",{id:"createPassword",name:"password",type:"password"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(e){return function(){return E.apply(this,arguments)}()}},"Create user"),r.a.createElement("div",{style:m,id:"createError"}))));return r.a.createElement("div",null,t,v,h)},D=n(7),U=n(8).url;var F=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(!1),c=Object(s.a)(l,2),m=c[0],p=c[1],f=Object(a.useState)(),g=Object(s.a)(f,2),E=g[0],v=g[1],h=Object(a.useState)(!1),b=Object(s.a)(h,2),y=b[0],k=b[1],w=Object(a.useState)([]),C=Object(s.a)(w,2),N=C[0],x=C[1],j=localStorage.getItem("JWT"),M=[];function B(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get(U+"/users/following/"+t).then((function(e){M=e.data,x(e.data)})).catch((function(e){console.log(e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){o(e),Object(d.b)(j)||e===E||(N.includes(e)?k(!0):k(!1))}function F(){localStorage.removeItem("JWT"),v(null),p(!1)}return Object(a.useEffect)((function(){if(j){var e=Object(d.a)(j);Object(d.b)(j)||(B(e.name),v(e.name),S(e.name),p(!0))}}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Bookmark World"),r.a.createElement(L,{logout:F,loginCreatePost:function(e){v(e),p(!0),o(e),B(e)},loggedInUser:E,loggedIn:m}),r.a.createElement(O,{name:n,parent:"/",logout:F,followed:y,setFollowed:k,removeFollowed:function(e){(M=N).pop(e),x(M)},addFollowed:function(e){(M=N).push(e),x(M)}}),r.a.createElement(I,{loggedInUser:E,changeSelectedUser:S,logout:F,followedUsers:N}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t){e.exports={url:"https://crystal-back.herokuapp.com"}}},[[19,1,2]]]);
//# sourceMappingURL=main.33307c0a.chunk.js.map